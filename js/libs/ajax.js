"use strict";!function(e,t){"undefined"!=typeof module?module.exports=t(e):(t(e),"function"==typeof define&&(define.amd||define.cmd)&&define("ajax",function(){return t(e)}))}(window||void 0,function(e){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=(o.method||"GET").toUpperCase(),d=o.success||function(){},p=o.error||function(){};return o=Object.assign({},s,o),o.headers=o.headers||{},o.headers.Accept=o.accepts[o.dataType||""]?o.accepts[o.dataType]+", */*":o.accepts._default,"GET"==u?(t+=(t.match(/\?/)?"&":"?")+c(o.body),o.body=null,delete o.headers[n]):"POST"==u?o.headers[n]==r?o.body=JSON.stringify(o.body):(o.body=c(o.body),o.headers[n]=a):(o.body=JSON.stringify(o.body),o.headers[n]=r),new Promise(function(n,r){var a,s,c,l,f,y=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject,m=!1;l=function(){c&&clearInterval(c),c=null},f=function(e){if(0==y.readyState)l();else if(!m&&y&&(4==y.readyState&&(y.status>=200&&y.status<300||304==y.status||404==y.status)||"timeout"==e)){if(m=!0,l(),"success"==(a="timeout"==e?"timeout":404==y.status?"404":"success"))try{s=i(y,o.dataType,o)}catch(e){a="parsererror"}"success"==a?(d.call(o,s),n(s)):(p.call(o,{msg:a}),r({msg:a})),e&&y.abort(),o.async&&(y=null)}};try{o.username?y.open(u,t,o.async,o.username,o.password):y.open(u,t,o.async),y.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.headers&&Object.keys(o.headers).forEach(function(e){y.setRequestHeader(e,o.headers[e])})}catch(e){p(e),r(e)}if(o.beforeSend&&!1===o.beforeSend(y,o))return y.abort(),!1;o.async&&(c=setInterval(f,13),o.timeout&&setTimeout(function(){y&&!m&&f("timeout")},o.timeout));try{y.send(o.body||null)}catch(e){p(e),r(e)}!o.async&&f()})}if(!e.CY&&(e.CY={}),e.CY.ajax)return e.CY.ajax;String.prototype.assign||Object.defineProperty(Object,"assign",{value:function(e){var t,n,r,a=Object(e);for(t=1;t<arguments.length;t++)if(null!=(n=arguments[t]))for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r]);return a},writable:!0,configurable:!0}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)});var n="Content-Type",r="application/json",a="application/x-www-form-urlencoded",s={async:!0,dataType:"json",accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},o=function(e){if(e&&/\S/.test(e)){var t=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script");n.type="text/javascript",n.text=e,t.insertBefore(n,t.firstChild),t.removeChild(n)}},i=function(t,n,r){var a=t.getResponseHeader("content-type"),s="xml"==n||!n&&a&&a.indexOf("xml")>=0,i=s?t.responseXML:t.responseText;if(s&&"parsererror"==i.documentElement.tagName)throw"parsererror";return"string"==typeof i&&("script"==n&&o(i),"json"==n&&(i=e.eval("("+i+")"))),i},c=function(e){var t,n=[];for(t in e||{})e.hasOwnProperty(t)&&n.push(t+"="+e[t]);return n.join("&")};return e.CY.ajax=t,t});