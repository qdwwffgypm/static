"use strict";!function(e,n){if("undefined"!=typeof module)require("../libs/ajax"),require("../libs/browser"),module.exports=n(e);else if(n(e),"function"==typeof define&&(define.amd||define.cmd)){var i="//"+(!/ppppoints.com/.test(document.domain)?"j.changyoyo.com":"j.ppppoints.com")+"/static/js/";requirejs.config({paths:{ajax:i+"libs/ajax",browser:i+"libs/browser"}}),define("shareUtil",["ajax","browser"],function(){return n(e)})}}(window||void 0,function(e){if(!e.CY&&(e.CY={}),e.CY.shareUtil)return e.CY.shareUtil;var n,i=window.requirejs,t=function(e,i){if(n)return n=[i];n=[i];var t=document.createElement("script");t.type="text/javascript",t.src=e[0],document.getElementsByTagName("head")[0].appendChild(t),t.onload=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||n[0]({})}},o=function(e){return Object.prototype.toString.call(e).split(/\s(\w+)/)[1].toLowerCase()},r=function(e,n){for(var i in n)"object"!=o(n[i])&&(e[i]=n[i]);return e},a={_path:{weixin:"//res.wx.qq.com/open/js/jweixin-1.2.0.js",qq:"//open.mobile.qq.com/sdk/qqapi.js",qzone:"//qzonestyle.gtimg.cn/qzone/hybrid/lib/jsbridge.js"},_initWeixin:function(n,i){i.config||(i=window.wx),e.CY.ajax("/pointgate/wechat/jsapi/auth.htm",{method:"GET",body:{authUrl:encodeURIComponent(location.href.split("#")[0])}}).then(function(e){if("0000"==e.respCode){var t,o=e.data||{},a={debug:!1,appId:o.appId,timestamp:o.timestamp,nonceStr:o.nonceStr,signature:o.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]};t=r([],a.jsApiList),i.config(a),i.ready(function(){t.forEach(function(e){i[e](n)})}),i.error(function(){})}})},_initQq:function(n){n.image_url=n.imgUrl,n.share_url=n.link,e.mqq.data.setShareInfo(n)},_initQzone:function(n){["toQQ","toQz","toWX","toTL"].forEach(function(i){e.mqq.invoke("share",i,n,function(e){n.success&&n.success(e)})})},setShareInfo:function(n){!i&&(i=t);var o=e.CY.browser.weixin?"weixin":e.CY.browser.qq?"qq":e.CY.browser.qzone?"qzone":"";if((e.weixin&&e.wx||e.CY.browser.qq&&e.mqq||e.CY.browser.qzone&&e.QZAppExternal)&&(t=function(e,n){n()}),o){var a=this,s={};r(s,n),r(s,n[o]||{}),i([a._path[o]],function(e){a["_init"+o.charAt(0).toUpperCase()+o.slice(1)](s,e)})}}};return e.CY.shareUtil=a,a});